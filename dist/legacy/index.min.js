// ==UserScript==
// @author          Oleg Valter <oleg.a.valter@gmail.com>
// @description     Brings back 404 pages to Stack Exchange network
// @grant           none
// @homepage        https://github.com/userscripters/bring-back-404#readme
// @match           https://*.askubuntu.com/*
// @match           https://*.stackapps.com/*
// @match           https://*.stackexchange.com/*
// @match           https://*.stackoverflow.com/*
// @match           https://*.superuser.com/*
// @name            bring-back-404
// @namespace       userscripters
// @source          git+https://github.com/userscripters/bring-back-404.git
// @supportURL      https://github.com/userscripters/bring-back-404/issues
// @version         0.0.2
// ==/UserScript==

"use strict";!function(s){var t=location.hostname.split(".").slice(0,-1).join("."),e=[{site:"stackoverflow",imageURL:"https://i.stack.imgur.com/okzBE.png"},{site:"meta.stackoverflow",imageURL:"https://i.stack.imgur.com/0i2to.png"},{site:"askubuntu",imageURL:"https://i.stack.imgur.com/KopoQ.png"},{site:"superuser",imageURL:"https://i.stack.imgur.com/hMfYx.png"},{site:"english.stackexchange",imageURL:"https://i.stack.imgur.com/cQLRt.png"},{site:"codereview.stackexchange",imageURL:"https://i.stack.imgur.com/R4Tgd.png"}].find(function(e){return e.site===t});if(!e)return console.debug("not on supported site: "+t);var e=e.imageURL,i=s.createElement("img");i.src=e,i.alt="Page not found",i.decoding="async",i.width=250,i.style.display="none",i.addEventListener("error",function(){return console.debug("failed to load 404 image on "+t)}),i.addEventListener("load",function(){var e=s.getElementById("content");if(!e)return console.debug("missing content modal");var t=e.querySelector("svg.spotAlertXL");if(!t)return console.debug("missing 404 image");t.replaceWith(i),i.style.display="unset";e=e.querySelector("h1");if(!e)return console.debug("missing 404 header");e.classList.remove("mt48");e=e.closest(".d-flex");if(!e)return console.debug("404 content does't use Flexbox");e.classList.replace("ai-start","ai-center")}),s.body.append(i)}((window,document));